---
title: "PHP calling non-static methods statically"
layout: "post"
permalink: "/2011/12/php-calling-non-static-methods.html"
---

<div class="css-full-post-content js-full-post-content">
When I read CakePHP core library code , I notice php has a strange way of implementing static method. In all other languages I know: C++, Java,&nbsp; class context can't call none static method.<br /><br />For example in Java:<br />--------------Java Code --------------------<br />class Test<br />{<br />&nbsp;&nbsp;&nbsp; static int i = 0;<br />&nbsp;&nbsp;&nbsp; public static void staticMethod()<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.print("I am static method");<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; public void noneStaticMethod()<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.print("I am static method");<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; public static void main(String argv[])<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.print("I am main");<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Test t = new Test();<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; t.staticMethod();<br />&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Test.noneStaticMethod(); // <span style="color: red;">Compile Error</span>: non-static method noneStaticMethod() cannot be referenced from a static context<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; }<br />}<br /><br />--------------End Java Code--------------------<br /><br />If we try to call none static method from class context (with class name, not object name), compiler will report a error like this.<br /><br /><br />However, calling none static method with class context in PHP is legal operation (version 5.3.6). let's take a look at the PHP code below:<br /><br /><br /> <br />--------------PHP Code --------------------<br /><!--?<br-->class StaticTest<br />{<br />&nbsp;&nbsp; &nbsp;static $static_var = 0;<br />&nbsp;&nbsp; &nbsp;var $non_static = 1;<br />&nbsp;&nbsp; &nbsp;static function staticMethod()<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; echo "I am static method";<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;function noneStaticMethod()<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; echo "I am not a static method";<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; // echo $this-&gt;i; // <span style="color: red;">line 13</span>: none static method with reference to object context<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; echo self::$static_var;<br />&nbsp;&nbsp; &nbsp;}<br />}<br /><br />$obj = new StaticTest();<br />$obj-&gt;staticMethod();<br />StaticTest::noneStaticMethod(); // line 20,&nbsp; call none static method from class context, no error here<br /><br />?&gt;<br />--------------End PHP Code--------------------<br /><br />in line 20, none static method is called with class context,&nbsp; this is legal in PHP;<br />If we uncomment line 13 and run this php script again, it will report a PHP fatal error:<br />"PHP Fatal error:&nbsp; Using $this when not in object context".<br /><br />From the code above, we can conclude that:&nbsp; in PHP 5.3.6, none static method could be invoked in class context unless there is no object reference in the static method definition.<br /><br /><br />I google around to find the reason behind why PHP is designed this way.<br />in php official site, it states that: "<span style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: white; color: black; display: inline !important; float: none; font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">Calling non-static methods statically generates an<span class="Apple-converted-space">&nbsp;</span></span><b style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: white; color: black; font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><tt style="font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', Monaco, 'Courier New', Courier, monospace;">E_STRICT</tt></b><span style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: white; color: black; display: inline !important; float: none; font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span class="Apple-converted-space">&nbsp;</span>level warning.</span>" [1]<br />Someone already report this as a bug to php in year 2004, see reference [2] but it looks like it is still not accepted as a bug.<br />someone mentioned this design is on the purpose to be back compatible to php4 which didn't have a static keyword in a stackoverflow thread. reference [3] <br />someone also state calling non-static methods statically will trigger a fatal error in PHP6. let's verify it when php6 is released !&nbsp; <br /> <br /><br /><br /> <br /> Reference:<br />[1] keywords in php &nbsp;&nbsp; <a href="http://php.net/manual/en/language.oop5.static.php">http://php.net/manual/en/language.oop5.static.php </a><br />[2] bug report on php.net&nbsp; <a href="https://bugs.php.net/bug.php?id=30355">https://bugs.php.net/bug.php?id=30355</a><br />[3] stackoverflow thread&nbsp; <a href="http://stackoverflow.com/questions/3754786/calling-non-static-method-with">http://stackoverflow.com/questions/3754786/calling-non-static-method-with</a><br /><br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /><br /><br /><br />
</div>